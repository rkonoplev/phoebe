# =========================================================
# Dockerfile.dev
# Local development image for Phoebe backend
# Uses Java 21 with Gradle for development with hot reload
# Uses standard Ubuntu-based image to avoid encoding issues
# =========================================================

FROM eclipse-temurin:21-jdk

# Install curl for health checks and netcat for the wait-for-it script
RUN apt-get update && \
    apt-get install -y curl netcat-openbsd && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

WORKDIR /app

# Copy backend source code to container
COPY backend/ .

# Make Gradle wrapper executable
RUN chmod +x ./gradlew

EXPOSE 8080

# Run Spring Boot application with Gradle
CMD ["./gradlew", "bootRun", "--no-daemon"]